# PopPins II - 통합 기획 문서
## "AI와 함께 설계하는 나만의 배움 여정"

**프로젝트명**: PopPins II (어딧세이 가제)  
**태그라인**: "어떤 주제든, AI가 실습형 PBL 학습지로 만들어줍니다"  
**작성일**: 2025-11-22  
**버전**: 1.9.0  
**최종 업데이트**: 2025-11-26

---

## 📌 Executive Summary

PopPins II는 AI 기반의 PBL (Problem-Based Learning) 학습 자료 자동 생성 플랫폼입니다. Google Gemini 2.5 Flash와 RAG(Retrieval-Augmented Generation) 기술을 활용하여, 학습자가 원하는 주제를 입력하면 교재 PDF를 기반으로 신뢰성 있는 개념 정리, 실습 과제, 퀴즈를 자동으로 생성합니다.

### 핵심 가치 제안
- **교육 접근성 제고**: AI가 교사가 없는 곳에 교사를 만들어줍니다
- **맞춤형 학습 경로**: 개인의 난이도와 목표에 맞춘 커리큘럼
- **PBL + AI 조합**: 실습 중심 학습과 AI의 혁신적 결합
- **전문 컨텐츠 기반**: PDF 교재를 벡터 DB로 저장하여 AI 환각 최소화
- **적응형 학습**: 학습 목표 선택 및 피드백 루프를 통한 지속적 개선

---

## 🎯 프로젝트 비전 및 목표

### 비전
AI와 함께 설계하는 나만의 배움 여정을 제공하는 플랫폼

### 목표
1. 학습자가 원하는 주제를 실습형 PBL 학습지로 자동 변환
2. 교재 PDF 기반 RAG로 신뢰성 있는 학습 콘텐츠 제공
3. 교육 격차 해소 및 접근성 제고
4. LMS에 부착 가능한 모듈식 PBL 생성 시스템 구축

---

## 🔑 주요 의사결정 및 Takeaways

### 멘토링 기반 프로젝트 방향 전환 (2025-11-17 ~ 11-19)

**핵심 결정사항**:
1. **범위 축소**: LMS 전체 개발 → **LMS 내 PBL 모듈만 개발**
2. **대상 확대**: 대치동 수학 학원 → **파이썬 학습으로 확정**
3. **신뢰도 확보**: AI 생성에만 의존 X → **전문 PDF 콘텐츠를 벡터 DB로 저장**
4. **MVP 우선**: 최소한의 UI를 갖춘 데모(DEMO) 개발에 집중
5. **피드백 루프 도입**: 학습 추적(Learning Trace) → 반영 → 개선 사이클 고려

**결정 근거**:
- 멘토 가이드: "프로젝트 범위를 LMS 내 PBL 모듈 개발로 한정"
- 확장성 고려: 향후 참조 데이터만 조정하면 다른 분야로 쉽게 확장 가능
- 신뢰성 강화: 전문 컨텐츠 별도 저장소(벡터 DB) 활용으로 컨텐츠 신뢰도 확보

**기술 스택 결정**:
- Frontend: React.js + Vite
- Backend: FastAPI
- Database: SQLite (History/Feedback)
- AI: Google Gemini 2.5 Flash + RAG
- Vector DB: FAISS + text-embedding-004
- Deployment: GCP Cloud Run + Vertex AI Studio (계획)

### MVP 우선순위 (회의록 기준)
1. 강의(커리큘럼) 생성 - ✅ 완료
2. 챕터 생성 - ✅ 완료
3. 개념 생성 - ✅ 완료
4. 문제 생성 - ✅ 완료
| 학습 히스토리 DB | ✅ 완료 | SQLite 연동, History API 구현 |
| Feedback Loop | ✅ 완료 | 챕터별 피드백 수집 및 저장 |
| LMS 통합 | ⏳ 계획 | Moodle 등 활용 검토 |
| GCP 배포 | ⏳ 계획 | Cloud Run + Vertex AI |

---


## 👥 사용자 페르소나

### 1. 수진 (대학생, 23세) - "짧은 시간, 필요한 내용을 학습"
**상황**:
- 비전공자(생명과)로 AI 공부 중
- 확률과 통계 기초가 생각나지 않음
- 중간고사 전 3일 내 핵심 개념 학습 필요

**요구사항**:
- 빠른 시간 내 핵심 개념 학습
- 비전공자도 이해 가능한 설명

### 2. 민수 (직장인, 31세) - "빠른 기간 안에 팀 단위 리스킬링"
**상황**:
- 갑자기 레거시 시스템(Delphi) 유지보수 업무 배정
- 팀원 중 Delphi 경험자 없음
- 다음 달까지 팀 교육자료 제작 필요

**요구사항**:
- 팀 단위 학습 자료 생성
- 실무에 바로 적용 가능한 실습 중심 콘텐츠

### 3. 윤지 (교사, 35세) - "공교육 내 실습형 AI 콘텐츠 설계"
**상황**:
- 도덕교사, 방과후 선생님 담당
- AI 윤리 교육 과정을 한 학기 동안 진행
- 기존 교재 부족, 대부분 영어 자료

**요구사항**:
- 한 학기 분량의 체계적인 커리큘럼
- 한국어로 된 실습형 교육 자료

### 4. 준호 (중학생, 14세) - "지역 교육 격차 해소"
**상황**:
- 강릉 인근 농어촌 마을 거주
- 학교에 과학 동아리, 코딩 수업 없음
- 유튜브로 학습하나 체계성 부족

**요구사항**:
- 교사 없이도 자습 가능한 구조화된 학습 자료
- 단계별 진행이 가능한 PBL 미션

---

## 🔄 사용자 시나리오 및 워크플로우

### 시나리오 1: 학습 내용 입력 & 구체화
1. 학습자가 원하는 주제 입력 (예: "파이썬 LinkedList")
2. AI가 채팅을 통해 학습 내용 구체화
   - 학습 목표 명확화 (기초/실무/심화 선택)
   - 사전 지식 확인
   - 학습 범위 조정

### 시나리오 2: 학습 기간 및 강도 결정
1. 학습 기간/강도 입력 (예: 3일 집중, 2주 완주, 1학기)
2. AI가 간단한 커리큘럼 리스트 제공
   - 단계별 학습 계획
   - 예상 소요 시간

### 시나리오 3: PBL 교육자료 출력 및 학습
1. 문제들을 단계별로 출력
   - 개념 정리 (1000~1200자, Markdown 형식)
   - 실습 과제 (3개의 개인화된 문제)
   - 형성평가 (3개의 주관식 퀴즈)
2. 학습 보조 자료 제공
   - PDF 참고 자료 인용
   - 예제 코드

### 시나리오 4: 학습 관리 및 평가
1. 진도 체크를 위한 형성평가
2. 학습 진도율 및 달성율 대시보드
   - 완료한 챕터 수
   - 학습 시간 추적
   - 평가 점수

---

## 4. 시스템 아키텍처 (System Architecture)

### High-Level Architecture

```
┌─────────────────────────────────────────────────────────┐
│              Frontend Layer (React + TS)                │
│  - User Interface (Tailwind CSS)                        │
│  - State Management (React Hooks)                       │
│  - API Client (Axios)                                   │
└────────────────────┬────────────────────────────────────┘
                     │ HTTP REST API
┌────────────────────▼────────────────────────────────────┐
│              Backend Layer (FastAPI)                    │
│  ┌──────────────────────────────────────────────────┐  │
│  │ POST /generate-study-material                    │  │
│  │  - 학습 주제 → 커리큘럼 + 콘텐츠 생성            │  │
│  │ GET /                                            │  │
│  │ GET /health                                      │  │
│  └──────────────────────────────────────────────────┘  │
│                                                         │
│  ┌─────────────────┐  ┌──────────────────────────┐    │
│  │   RAG Engine    │  │   AI Generator Layer     │    │
│  │  - PDF Loader   │  │  - CourseMaker          │    │
│  │  - Chunker      │  │  - ConceptMaker         │    │
│  │  - Embedding    │  │  - ExerciseMaker        │    │
│  │  - FAISS DB     │  │  - QuizMaker            │    │
│  │  - Retriever    │  │                          │    │
│  └────────┬────────┘  └──────────┬───────────────┘    │
│           │ context               │                     │
│           └───────────────────────┘                     │
184: └────────────────────┬────────────────────────────────────┘
                     │
┌────────────────────▼────────────────────────────────────┐
│              AI Engine (Google Gemini)                  │
│  - Model: Gemini 2.5 Flash                             │
│  - Embedding: text-embedding-004                       │
│  - Temperature: 0.7                                     │
│  - Max Tokens: 2048~8192                               │
└─────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────┐
│              Vector Database (FAISS)                    │
│  - Python 교재 PDF 임베딩                               │
│  - Similarity Search (Top-K=3)                         │
│  - 문서 메타데이터 저장                                 │
└─────────────────────────────────────────────────────────┘
```

### RAG 파이프라인

```
PDF 파일 → PyPDFLoader → RecursiveCharacterTextSplitter
                            (chunk_size=1000, overlap=200)
                                      ↓
                          GoogleGenerativeAIEmbeddings
                          (text-embedding-004)
                                      ↓
                          FAISS VectorStore 저장
                                      ↓
                          사용자 질문 → Similarity Search (k=3)
                                      ↓
                          관련 문서 컨텍스트 → Gemini Prompt
```

---

## ⚙️ 핵심 기능 명세

### 1. 학습 주제 입력 및 구체화
- **설명**: 사용자가 학습 주제 입력, AI와 대화로 구체화
- **입력**: 
  - 주제명 (예: "Flask 기반 CRUD 기초")
  - 난이도 선택 (초급/중급/고급)
  - 최대 챕터 수 (기본값: 3)
  - 강의 설명 (선택)
- **출력**: 구체화된 학습 목표 및 범위

### 2. AI 기반 PBL 생성 (RAG 활용)
- **설명**: Gemini 2.5 Flash + RAG로 PBL 형식 학습 자료 생성
- **입력**: 구체화된 학습 주제, 기간, 난이도
- **출력**:
  - JSON/Markdown 형식 학습 자료
  - 단계별 챕터 구성
  - 각 챕터별 개념 정리, 실습 과제, 평가 문제

#### 4가지 AI 생성기

**CourseMaker**: 커리큘럼 생성
- Course ID 생성
- 챕터 ID, 제목, 설명 생성
- 최대 챕터 수 제한

**ConceptMaker**: 개념 정리 생성
- 1000~1200자 분량
- Markdown 형식
- PDF 참고 자료 기반 (RAG)
- 예제 코드 포함

**ExerciseMaker**: 실습 과제 생성
- 3개의 개인화된 실습 문제
- 기본 개념 → 응용 → 확장 순서
- PDF 예제 기반 (RAG)

**QuizMaker**: 퀴즈 생성
- 3개의 주관식 문제
- 개념 이해도 평가 중심
- PDF 핵심 개념 기반 (RAG)

### 3. RAG 벡터 DB 통합
- **설명**: 파이썬 교재 PDF를 벡터 DB로 저장하여 참고
- **기능**:
  - PDF 텍스트 → Chunking → Embedding → FAISS 저장
  - 문서 기반 정확성 확보
  - AI는 문서 제공 + PBL 변환 역할

### 4. 결과 시각화 (완료)
- **설명**: 생성된 학습 자료를 직관적인 UI로 표시
- **기능**:
  - 챕터별 카드 형태 표시
  - 진행 상황 시각화
  - 단계별 네비게이션

### 5. 재생성 기능 (Cache 활용 - 완료)
- **설명**: 동일 주제 재요청 시 캐시 활용 또는 재생성
- **기능**:
  - "Generate Again" 버튼
  - 과거 생성 학습 자료 불러오기

### 6. 간단한 LMS & 대시보드 (예정)
- **설명**: 학습 진도 관리 및 시각화
- **기능**:
  - 학습 진도율 표시
  - 완료한 챕터 추적
  - 평가 점수 기록
  - 학습 시간 추적

---

## 🛠️ 기술 스택

### Frontend (구현 완료)
- **프레임워크**: React.js + Vite
- **주요 기능**:
  - 학습 주제 입력 UI
  - 학습 목표 선택 UI
  - 결과 시각화 (카드 UI)
  - 피드백 제출 UI

### Backend (구현 완료)
- **프레임워크**: FastAPI
- **주요 기능**:
  - RESTful API
  - 학습 주제, 생성 자료 관리
  - RAG 엔진 통합
  - Retry Logic (안정성 강화)

### AI Engine (구현 완료)
- **LLM**: Google Gemini 2.5 Flash
- **Embedding**: text-embedding-004
- **RAG**: LangChain + FAISS
- **주요 기능**:
  - Prompt 구조화
  - PBL 형식 학습 자료 생성
  - JSON/Markdown 출력

### 벡터 데이터베이스 (구현 완료)
- **DB**: FAISS (Facebook AI Similarity Search)
- **임베딩 모델**: Gemini text-embedding-004
- **청크 크기**: 1000자 (overlap 200자)

### 패키지 의존성
```
fastapi==0.104.0+
uvicorn
pydantic
google-generativeai
python-dotenv
langchain
langchain-community
langchain-google-genai
faiss-cpu
sqlalchemy
```

---

## 📊 비기능 요구사항

### 1. 속도
- **요구사항**: 1분 이내 학습지 초안 출력
- **현재 성능**: 챕터당 10-30초
- **우선순위**: 높음

### 2. 안정성
- **요구사항**: 고의적 입력 오류에도 크래시 없이 응답
- **구현**: HTTPException 처리, JSON 파싱 재시도, **Retry Logic**
- **우선순위**: 높음

### 3. 정확성
- **요구사항**: PDF 문서 기반 정확한 내용 생성
- **구현**: RAG로 문서 근거 포함, 환각 최소화
- **우선순위**: 높음

### 4. 다국어 지원 (비우선)
- **요구사항**: 최소 2개 언어권 이상 자료 생성
- **우선순위**: 낮음 (향후 확장)

### 5. 보안 (비우선)
- **요구사항**: 사용자 입력 일시 저장 후 폐기
- **우선순위**: 중간

### 6. 캐싱 전략 (비우선)
- **요구사항**: 동일 주제 재요청 시 cache 활용
- **우선순위**: 중간

---

## 🌍 확장 사용자 시나리오

### 국내: 교육 접근성 제고
**상황**:
- 중학교 2학년 준호, 강릉 인근 농어촌 마을 거주
- 집에서 학교까지 버스로 40분
- 학교에 과학 동아리, 코딩 수업 없음
- 유튜브로 학습하나 체계성 없어 포기

**결과**:
- 교사 없이도 실습 → 결과 기록 → 다음 단계 루프 작동
- 마을 도서관 담당자가 "AI 보조 교사" 역할 가능

**가치 포인트**: AI가 지역간 학습 격차 해소, 동일 학습 경험 제공

### 해외: 극한 상황에서의 교육 수요 해소
**상황**:
- 요르단 자타리 난민 캠프
- 교사 아메드에게 아이들 위한 교재 없음
- "아랍어로 과학 기초를 가르치고 싶어요. 실험도구는 없어요." 입력

**결과**:
- AI가 현지 언어와 자원 수준에 맞춘 PBL 수업안 자동 설계

**가치 포인트**: "AI가 교사를 대체하는 게 아니라, 교사가 없는 곳에 교사를 만들어준다."

---

## 📅 개발 일정 (3단계 Sprint)

### 1단계: 전단계 (~ 11/9) ✅ 완료
- 역할 나누기
- API 흐름 설계
- 시범 케이스 및 응용 케이스 찾기
- Cursor 익숙해지기

### 2단계: 본격 개발 (11/10 ~ 11/23) ✅ 완료
- API 개발 완료
- RAG 벡터 DB 통합
- Prompt 최적화
- MVP 제작 완료

**주요 성과**:
- `main.py` 구현 완료
- FAISS 벡터 DB 통합
- 4가지 AI 생성기 구현
- API 문서 작성

### 3단계: 통합 및 고도화 (11/24 ~ 11/25) ✅ 완료
- ✅ 백엔드 API 안정화 (Retry Logic)
- ✅ Frontend 개발 (React + Vite)
- ✅ 적응형 학습 기능 (Objectives, Feedback)
- ✅ DB 연동 (History)

---

## 🎯 성공 지표

### 기술적 성공 지표
- ✅ 학습지 생성 시간: 1분 이내
- ✅ 시스템 안정성: 크래시 없이 동작
- ✅ Prompt 품질: 구조화된 JSON/Markdown 출력
- ✅ RAG 정확도: 문서 근거 포함 응답률 90% 이상

### 사용자 경험 성공 지표
- ✅ 사용자 시나리오 3가지 모두 만족
- ✅ 직관적인 UI/UX (Frontend 개발 완료)
- ✅ 학습 진도 추적 가능 (History API)

### 프로젝트 성공 지표
- ✅ 작동하는 백엔드 프로토타입 완성
- ✅ Frontend 통합 및 시연 준비 완료
- ✅ 심사 기준별 전략 달성

---

## ⚠️ 리스크 및 대응 방안

### 1. 기술적 리스크
**리스크**: AI 응답 품질이 기대에 못 미칠 경우  
**대응**: 
- ✅ Prompt 엔지니어링 집중
- ✅ RAG로 문서 기반 정확성 확보
- ✅ 다양한 테스트 케이스 준비

**리스크**: PDF 품질 저하  
**대응**: pdfminer fallback, 텍스트 전처리

**리스크**: LLM 환각  
**대응**: RAG 강제 + 문서 인용 포함

### 2. 일정 리스크
**리스크**: 개발 일정 지연  
**대응**: 
- MVP 기능에 집중
- 우선순위 명확화
- Frontend는 최소화

### 3. 리소스 리스크
**리스크**: AI API 비용 초과  
**대응**: 
- 캐싱 전략 활용
- 효율적인 API 호출
- 무료 티어 최대 활용

---

## 🚀 향후 확장 계획

### 단기 확장
- 사용자 인증 및 세션 관리
- 학습 히스토리 저장 (데이터베이스) - ✅ 1차 완료
- 다양한 학습 주제 지원 확대
- 학습 자료 품질 개선

### 장기 확장
- 다국어 지원 확대
- 모바일 앱 개발
- 협업 학습 기능
- 학습자 커뮤니티 구축
- 교사용 관리 도구 확장
- 실시간 채팅 인터페이스
- 학습 분석 및 피드백 루프 - ✅ 1차 완료

---

## 📚 참고 문서

- [API Reference](../app/API_REFERENCE.md)
- [RAG Integration Guide](../app/RAG_INTEGRATION_GUIDE.md)
- [README](../app/README.md)
- [원본 PWD](./PWD_어딧세이.md)
- [PRD](./prd.md)
- [구현 예상 형태](./yesang.md)

---

## 📝 메모

> "상을 못 받아도 좋으니, 재미있고 즐겁게 해 봐요!"
> 
> 조별과제와 졸업 작품 사이의 어딘가...
> 
> 다른 것은 몰라도, 텀 프로젝트가 끝났을 때,  
> 우리 모두는 커서 고수가 되어 있을 것입니다!

---

**문서 버전**: 1.5.0  
**최종 수정일**: 2025-11-25  
**작성자**: 이진걸  
**상태**: MVP 개발 완료 (Backend + Frontend)
